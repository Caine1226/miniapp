<!DOCTYPE html>
<html>
<head>
    <title>üç™ –ü–µ—á–µ–Ω—å–∫–æ–≤–∞—è —Ñ–µ—Ä–º–∞</title>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <style>
        * { box-sizing: border-box; margin: 0; padding: 0; }
        body { font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, sans-serif; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; padding: 20px; min-height: 100vh; }
        .container { max-width: 400px; margin: 0 auto; background: rgba(255, 255, 255, 0.1); border-radius: 20px; padding: 20px; backdrop-filter: blur(10px); border: 1px solid rgba(255, 255, 255, 0.2); }
        h1 { text-align: center; margin-bottom: 20px; font-size: 24px; }
        .cookie { font-size: 80px; text-align: center; margin: 15px 0; cursor: pointer; transition: transform 0.2s; user-select: none; }
        .cookie:active { transform: scale(0.9); }
        .stats { background: rgba(0, 0, 0, 0.2); padding: 15px; border-radius: 15px; margin: 15px 0; }
        .stat-row { display: flex; justify-content: space-between; margin: 8px 0; }
        .btn { background: rgba(255, 255, 255, 0.2); color: white; border: 2px solid white; padding: 12px 20px; border-radius: 25px; margin: 8px 0; width: 100%; font-size: 16px; cursor: pointer; transition: all 0.3s; }
        .btn:hover { background: rgba(255, 255, 255, 0.3); }
        .btn-admin { background: rgba(255, 0, 0, 0.3); border-color: #ff4444; }
        .btn-legendary { background: linear-gradient(135deg, #ff6b6b 0%, #feca57 50%, #ff9ff3 100%); color: black; border: 2px solid #feca57; font-weight: bold; animation: glow 2s infinite alternate; }
        @keyframes glow { from { box-shadow: 0 0 10px #feca57; } to { box-shadow: 0 0 20px #ff6b6b, 0 0 30px #ff9ff3; } }
        .section { margin: 20px 0; }
        .shop-item { background: rgba(0, 0, 0, 0.2); padding: 15px; border-radius: 15px; margin: 10px 0; }
        .admin-panel { background: rgba(255, 0, 0, 0.1); padding: 15px; border-radius: 15px; margin: 15px 0; border: 2px solid #ff4444; }
        .hidden { display: none; }
        .tab-button { background: rgba(255, 255, 255, 0.1); border: none; color: white; padding: 10px; margin: 5px; border-radius: 10px; cursor: pointer; }
        .tab-button.active { background: rgba(255, 255, 255, 0.3); }
        .legendary-effect { position: fixed; top: 0; left: 0; width: 100%; height: 100%; pointer-events: none; z-index: 1000; animation: rainbowBg 3s; }
        @keyframes rainbowBg { 0% { background: rgba(255, 107, 107, 0.3); } 25% { background: rgba(254, 202, 87, 0.3); } 50% { background: rgba(113, 201, 206, 0.3); } 75% { background: rgba(159, 255, 243, 0.3); } 100% { background: transparent; } }
    </style>
</head>
<body>
    <div class="container">
        <h1>üç™ –ü–µ—á–µ–Ω—å–∫–æ–≤–∞—è —Ñ–µ—Ä–º–∞</h1>
        <div class="cookie" onclick="collectCookies()">üç™</div>
        <div class="stats">
            <div class="stat-row"><span>–ü–µ—á–µ–Ω–µ–∫:</span><strong id="cookies">0</strong></div>
            <div class="stat-row"><span>–ë—É—Å—Ç:</span><strong id="boost">x1</strong></div>
            <div class="stat-row"><span>–î–æ —Å–±–æ—Ä–∞:</span><strong id="timer">0:00</strong></div>
        </div>
        <div class="tabs">
            <button class="tab-button active" onclick="showTab('main')">–û—Å–Ω–æ–≤–Ω–æ–µ</button>
            <button class="tab-button" onclick="showTab('shop')">–ú–∞–≥–∞–∑–∏–Ω</button>
            <button class="tab-button hidden" id="admin-tab-btn" onclick="showTab('admin')">–ê–¥–º–∏–Ω</button>
        </div>
        <div id="tab-main" class="section">
            <button class="btn" onclick="collectCookies()">–°–æ–±—Ä–∞—Ç—å –ø–µ—á–µ–Ω—å–∫–∏</button>
            <button class="btn" onclick="showProfile()">–ú–æ–π –ø—Ä–æ—Ñ–∏–ª—å</button>
        </div>
        <div id="tab-shop" class="section hidden">
            <div class="shop-item"><h3>üõ†Ô∏è –£–¥–æ–±–Ω–∞—è –ª–æ–ø–∞—Ç–∞</h3><p>+1 –∫ —Å–±–æ—Ä—É –∑–∞ —Ä–∞–∑</p><p>–¶–µ–Ω–∞: 50 –ø–µ—á–µ–Ω–µ–∫</p><button class="btn" onclick="buyBoost(1, 50)">–ö—É–ø–∏—Ç—å</button></div>
            <div class="shop-item"><h3>‚ö° –ó–æ–ª–æ—Ç–∞—è –ª–æ–ø–∞—Ç–∞</h3><p>+5 –∫ —Å–±–æ—Ä—É –∑–∞ —Ä–∞–∑</p><p>–¶–µ–Ω–∞: 200 –ø–µ—á–µ–Ω–µ–∫</p><button class="btn" onclick="buyBoost(5, 200)">–ö—É–ø–∏—Ç—å</button></div>
            <div class="shop-item"><h3>üöÄ –°—É–ø–µ—Ä–±—É—Å—Ç</h3><p>–£–¥–≤–æ–µ–Ω–∏–µ –≤—Å–µ–≥–æ —Å–±–æ—Ä–∞!</p><p>–¶–µ–Ω–∞: 500 –ø–µ—á–µ–Ω–µ–∫</p><button class="btn" onclick="buyMultiplier(2, 500)">–ö—É–ø–∏—Ç—å</button></div>
        </div>
        <div id="tab-admin" class="section hidden">
            <div class="admin-panel">
                <h3>‚öôÔ∏è –ü–∞–Ω–µ–ª—å –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞</h3>
                <button class="btn btn-admin" onclick="addCookies(100)">+100 –ø–µ—á–µ–Ω–µ–∫</button>
                <button class="btn btn-admin" onclick="addCookies(1000)">+1000 –ø–µ—á–µ–Ω–µ–∫</button>
                <button class="btn btn-admin" onclick="setBoost(10)">–ë—É—Å—Ç x10</button>
                <button class="btn btn-admin" onclick="setBoost(100)">–ë—É—Å—Ç x100</button>
                <button class="btn btn-legendary" onclick="unlockLegendaryShovel()">üöÄ –ê–ö–¢–ò–í–ò–†–û–í–ê–¢–¨ –õ–ï–ì–ï–ù–î–ê–†–ù–£–Æ –õ–û–ü–ê–¢–£</button>
                <button class="btn btn-admin" onclick="resetCooldown()">–°–±—Ä–æ—Å–∏—Ç—å –≤—Ä–µ–º—è</button>
                <button class="btn btn-admin" onclick="resetGame()">–ù–æ–≤–∞—è –∏–≥—Ä–∞</button>
                <p style="margin-top: 15px; font-size: 12px; opacity: 0.7;">User ID: <span id="user-id"></span></p>
            </div>
        </div>
    </div>

    <script>
        const ADMIN_ID = '6355199863'; // –ó–ê–ú–ï–ù–ò–¢–ï –ù–ê –°–í–û–ô ID!
        let playerData = { cookies: 0, boost: 1, lastCollect: 0, totalEarned: 0, hasLegendaryShovel: false };

        function getTelegramUserId() {
            if (Telegram.WebApp.initDataUnsafe?.user) return Telegram.WebApp.initDataUnsafe.user.id.toString();
            return new URLSearchParams(window.location.search).get('user_id') || 'unknown';
        }

        function isAdmin() { return getTelegramUserId() === ADMIN_ID; }

        function checkAdminRights() {
            if (isAdmin()) {
                document.getElementById('admin-tab-btn').classList.remove('hidden');
                document.getElementById('user-id').textContent = getTelegramUserId();
            } else {
                document.getElementById('admin-tab-btn').classList.add('hidden');
                document.getElementById('tab-admin').classList.add('hidden');
            }
        }

        function loadData() {
            const saved = localStorage.getItem('cookieData');
            if (saved) {
                playerData = JSON.parse(saved);
                if (playerData.hasLegendaryShovel) upgradeToLegendary();
            }
            updateDisplay();
        }

        function saveData() { localStorage.setItem('cookieData', JSON.stringify(playerData)); }

        function unlockLegendaryShovel() {
            if (!isAdmin()) return alert('‚ùå –ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –ø—Ä–∞–≤!');
            if (playerData.hasLegendaryShovel) return alert('üöÄ –õ–µ–≥–µ–Ω–¥–∞—Ä–Ω–∞—è –ª–æ–ø–∞—Ç–∞ —É–∂–µ –∞–∫—Ç–∏–≤–∏—Ä–æ–≤–∞–Ω–∞!');
            
            const effect = document.createElement('div');
            effect.className = 'legendary-effect';
            document.body.appendChild(effect);
            setTimeout(() => document.body.removeChild(effect), 3000);
            
            playerData.hasLegendaryShovel = true;
            playerData.boost = 1000;
            upgradeToLegendary();
            saveData();
            updateDisplay();
            
            setTimeout(() => alert(`‚ú® –õ–ï–ì–ï–ù–î–ê–†–ù–ê–Ø –õ–û–ü–ê–¢–ê –ê–ö–¢–ò–í–ò–†–û–í–ê–ù–ê!\n\nüöÄ –ë—É—Å—Ç: x1000\nüåü –ü–µ—á–µ–Ω—å–∫–∞ –ø—Ä–µ–≤—Ä–∞—Ç–∏–ª–∞—Å—å –≤ –∑–≤–µ–∑–¥—É!\nüí´ –¢–µ–ø–µ—Ä—å —Å–æ–±–∏—Ä–∞–µ—à—å –ø–æ ${10 * 1000} –ø–µ—á–µ–Ω–µ–∫ –∑–∞ —Ä–∞–∑!`), 1000);
        }

        function upgradeToLegendary() {
            const cookie = document.querySelector('.cookie');
            cookie.textContent = 'üåü';
            cookie.style.fontSize = '100px';
            cookie.style.textShadow = '0 0 20px gold';
        }

        function collectCookies() {
            const now = Date.now();
            const cooldown = 2 * 60 * 60 * 1000;
            if (now - playerData.lastCollect < cooldown) {
                updateTimer();
                return alert('‚è≥ –ï—â–µ —Ä–∞–Ω–æ! –ü–æ–¥–æ–∂–¥–∏ –Ω–µ–º–Ω–æ–≥–æ.');
            }

            let reward = 10 * playerData.boost;
            if (playerData.hasLegendaryShovel) reward *= 2;

            playerData.cookies += reward;
            playerData.totalEarned += reward;
            playerData.lastCollect = now;
            saveData();
            updateDisplay();
            
            const cookie = document.querySelector('.cookie');
            if (playerData.hasLegendaryShovel) {
                cookie.style.transform = 'scale(1.5) rotate(360deg)';
                setTimeout(() => cookie.style.transform = 'scale(1) rotate(0deg)', 500);
            } else {
                cookie.style.transform = 'scale(1.2)';
                setTimeout(() => cookie.style.transform = 'scale(1)', 200);
            }
            
            alert(`üéâ +${reward} –ø–µ—á–µ–Ω–µ–∫!`);
        }

        function buyBoost(amount, price) {
            if (playerData.cookies >= price) {
                playerData.cookies -= price;
                playerData.boost += amount;
                saveData();
                updateDisplay();
                alert(`‚úÖ –ö—É–ø–ª–µ–Ω–æ! –ë—É—Å—Ç —É–≤–µ–ª–∏—á–µ–Ω –Ω–∞ +${amount}`);
            } else {
                alert('‚ùå –ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –ø–µ—á–µ–Ω–µ–∫!');
            }
        }

        function buyMultiplier(multiplier, price) {
            if (playerData.cookies >= price) {
                playerData.cookies -= price;
                playerData.boost *= multiplier;
                saveData();
                updateDisplay();
                alert(`‚úÖ –ö—É–ø–ª–µ–Ω–æ! –ë—É—Å—Ç —É–º–Ω–æ–∂–µ–Ω –Ω–∞ x${multiplier}`);
            } else {
                alert('‚ùå –ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –ø–µ—á–µ–Ω–µ–∫!');
            }
        }

        function addCookies(amount) {
            if (!isAdmin()) return alert('‚ùå –ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –ø—Ä–∞–≤!');
            playerData.cookies += amount;
            saveData();
            updateDisplay();
            alert(`‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–æ ${amount} –ø–µ—á–µ–Ω–µ–∫!`);
        }

        function setBoost(boostValue) {
            if (!isAdmin()) return alert('‚ùå –ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –ø—Ä–∞–≤!');
            playerData.boost = boostValue;
            saveData();
            updateDisplay();
            alert(`‚úÖ –ë—É—Å—Ç —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω –Ω–∞ x${boostValue}`);
        }

        function resetCooldown() {
            if (!isAdmin()) return alert('‚ùå –ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –ø—Ä–∞–≤!');
            playerData.lastCollect = 0;
            saveData();
            updateDisplay();
            alert('‚úÖ –í—Ä–µ–º—è —Å–±—Ä–æ—à–µ–Ω–æ! –ú–æ–∂–Ω–æ —Å–æ–±–∏—Ä–∞—Ç—å.');
        }

        function resetGame() {
            if (!isAdmin()) return alert('‚ùå –ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –ø—Ä–∞–≤!');
            if (confirm('‚ö†Ô∏è –¢–û–ß–ù–û –ù–ê–ß–ê–¢–¨ –ó–ê–ù–û–í–û? –í—Å–µ –ø—Ä–æ–≥—Ä–µ—Å—Å –±—É–¥–µ—Ç –ø–æ—Ç–µ—Ä—è–Ω!')) {
                playerData = { cookies: 0, boost: 1, lastCollect: 0, totalEarned: 0, hasLegendaryShovel: false };
                const cookie = document.querySelector('.cookie');
                cookie.textContent = 'üç™';
                cookie.style.fontSize = '80px';
                cookie.style.textShadow = 'none';
                saveData();
                updateDisplay();
                alert('üîÑ –ò–≥—Ä–∞ —Å–±—Ä–æ—à–µ–Ω–∞!');
            }
        }

        function showProfile() {
            alert(`üë§ –í–ê–® –ü–†–û–§–ò–õ–¨:\n\nüç™ –ü–µ—á–µ–Ω–µ–∫: ${playerData.cookies}\n‚ö° –ë—É—Å—Ç: x${playerData.boost}\nüìä –í—Å–µ–≥–æ —Å–æ–±—Ä–∞–Ω–æ: ${playerData.totalEarned}${playerData.hasLegendaryShovel ? '\nüåü –õ–µ–≥–µ–Ω–¥–∞—Ä–Ω–∞—è –ª–æ–ø–∞—Ç–∞: –ê–ö–¢–ò–í–ò–†–û–í–ê–ù–ê!' : ''}`);
        }

        function updateDisplay() {
            document.getElementById('cookies').textContent = playerData.cookies;
            document.getElementById('boost').textContent = 'x' + playerData.boost;
            if (playerData.hasLegendaryShovel) {
                document.getElementById('boost').innerHTML = 'x1000 <span style="color:gold">üåü</span>';
            }
            updateTimer();
        }

        function updateTimer() {
            const now = Date.now();
            const cooldown = 2 * 60 * 60 * 1000;
            const remaining = cooldown - (now - playerData.lastCollect);
            const timer = document.getElementById('timer');
            if (remaining > 0) {
                const hours = Math.floor(remaining / (1000 * 60 * 60));
                const minutes = Math.floor((remaining % (1000 * 60 * 60)) / (1000 * 60));
                timer.textContent = `${hours}—á ${minutes}–º`;
            } else {
                timer.textContent = '0:00';
            }
        }

        function showTab(tabName) {
            document.querySelectorAll('.section').forEach(tab => tab.classList.add('hidden'));
            document.getElementById('tab-' + tabName).classList.remove('hidden');
            document.querySelectorAll('.tab-button').forEach(btn => btn.classList.remove('active'));
            event.target.classList.add('active');
        }

        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è
        Telegram.WebApp.ready();
        Telegram.WebApp.expand();
        loadData();
        checkAdminRights();
        setInterval(updateTimer, 60000);
    </script>
</body>
</html>